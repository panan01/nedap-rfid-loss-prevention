<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/main.css"> <!-- Compiled from SCSS -->
  <meta charset="UTF-8">
  <title>Import/export</title>
</head>
<body>
<div class="row-fluid">
  <div class="span1">
    <form onsubmit="handleUpload()" method="POST" enctype="multipart/form-data" id="submitForm">
      <p>What file do you want to upload?</p>
      <input type="file" id="fileToUpload" name="fileToUpload" required>
      <br>
      <input type="submit" value="Submit">
      <p id="submitResponse"></p>
    </form>
  </div>
  <div class="span2">
    <a href="/loss_prevention_war/download/alarm" download="alarms">
      Download alarm data (as excel)
    </a>
    <br>
    <a href="/loss_prevention_war/download/article" download="articles">
      Download article data (as excel)
    </a>
    <br>
    <a href="/loss_prevention_war/download/store" download="stores">
      Download store data (as excel)
    </a>
  </div>
</div>
</body>



<script>
  function handleUpload() {
    let items = document.getElementById("submitResponse");
    let xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() {
      if (this.readyState === 4 && this.status === 200) {
        items.innerText = this.responseText;
      }
    }
    let URI = "http://localhost:8080/loss_prevention_war/upload";
    let formData = new FormData();
    formData.append("fileToUpload", document.getElementById("fileToUpload").files[0]);
    xmlHttp.open("POST", URI, true);
    xmlHttp.send(formData);
    items.innerText = "Uploaded file, processing...";
  }

  let form = document.getElementById("submitForm");
  function handleForm(event) { event.preventDefault(); }
  form.addEventListener('submit', handleForm);
</script>

<style>
.span1 {
  float: left;
}
.span2 {
  float: right;
}
.row-fluid {
  max-width: 550px;
}
</style>

</html>

